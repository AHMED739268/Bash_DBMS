#!/bin/bash

DB_PATH="./databases"
mkdir -p $DB_PATH

while true; do
    echo "=============================="
    echo "Database Management System"
    echo "=============================="
    echo "1. Create Database"
    echo "2. List Databases"
    echo "3. Connect to Database"
    echo "4. Delete Database"
    echo "5. Exit"
    read -p "Enter your choice [1-5]: " choice

    case $choice in
        1)
            read -p "Enter database name: " dbname
            if [[ $dbname =~ ^[a-zA-Z_][a-zA-Z0-9_]*$ ]]; then
                if [[ -d "$DB_PATH/$dbname" ]]; then
                    echo "Database '$dbname' already exists."
                else
                    mkdir "$DB_PATH/$dbname"
                    echo "Database '$dbname' created."
                fi
            else
                echo "Invalid database name."
            fi
            ;;
        2)
            echo "Available Databases:"
            ls $DB_PATH
            ;;
        3)
            read -p "Enter database name to connect: " dbname
            if [[ -d "$DB_PATH/$dbname" ]]; then
                echo "Connecting to database $dbname..."
                ./table.sh "$DB_PATH/$dbname"
            else
                echo "Database does not exist."
            fi
            ;;
        4)
            read -p "Enter database name to delete: " dbname
            if [[ -d "$DB_PATH/$dbname" ]]; then
                read -p "Are you sure you want to delete $dbnam? (y/n): " confirm
                if [[ $confirm == "y" || $confirm == "Y" ]]; then
                    rm -r "$DB_PATH/$dbname"
                    echo "Database '$dbname' deleted."
                else
                    echo "Operation cancelled."
                fi
            else
                echo "Database does not exist."
            fi
            ;;
        5)
            echo "Exiting Database Management System. Goodbye!"
            exit 0
            ;;
        *)
            echo "Invalid choice. Please try again."
            ;;
    esac
done
